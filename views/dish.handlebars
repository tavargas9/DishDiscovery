<div class="text-center">
  <h2>{{dish_title}}</h2>
  <p>{{description}}</p>
  <p>Created by {{user.name}} on {{format_date date_created}}</p>
  <p class="d-flex p-2 flex-row justify-content-center">
    <img class="w-50" src="{{img_url}}"/>
  </p>
  <h3>Recipe</h1>
  <div>
    <p><b>Prep time:</b> {{recipe.prep_time}} <b>Servings:</b> {{recipe.servings}}</p>
    <p><b>Ingredients:</b> {{recipe.ingredients}}</p>
    <p><b>Directions:</b> {{recipe.directions}}</p>
  </div>
   <!-- Favorite Button -->
  <p>
    <button onclick="toggleFavorite()" class="btn btn-primary mt-2" id="favorite-button">
      {{#if isFavorite}}Remove from Favorites{{else}}Save this recipe!{{/if}}
    </button>
  </p>

  <!-- Comment Section -->
  <div class="comments-section mt-4">
    <h3>Comments</h3>
    <ul id="comment-list">
      {{#each comments}}
      <li>{{this}}</li>
      {{/each}}
    </ul>
    <div>
      <textarea id="comment-input" class="form-control" placeholder="Add a comment"></textarea>
      <button onclick="addComment()" class="btn btn-primary mt-2">Add Comment</button>
    </div>
  </div>
</div>

<script>
  // JavaScript functions for favorite button and comments
  function toggleFavorite() {
    // Update the isFavorite variable accordingly
    const isFavorite = !{{isFavorite}}; // Invert the current state
    updateFavoriteButton(isFavorite);

    // You should also send a request to your server to update the favorite status
    // Example: sendFavoriteStatusToServer(isFavorite);
  }

  function updateFavoriteButton(isFavorite) {
    const favoriteButton = document.getElementById('favorite-button');
    favoriteButton.textContent = isFavorite ? 'Remove from Favorites' : 'Save this recipe!';
  }

  function addComment() {
    const commentInput = document.getElementById('comment-input');
    const commentText = commentInput.value.trim();

    if (commentText !== '') {
      // Update the comments list accordingly
      updateCommentsList(commentText);
      // Clear the comment input
      commentInput.value = '';
    }
  }
  function updateCommentsList(comment) {
    const commentList = document.getElementById('comment-list');
    const listItem = document.createElement('li');
    listItem.textContent = comment;
    commentList.appendChild(listItem);
  }
</script>


